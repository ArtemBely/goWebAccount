(()=>{var e={2:(e,t,n)=>{"use strict";const a=require("react");var r=n.n(a);const s=require("react-router-dom"),c=require("@babel/runtime/helpers/classCallCheck");var i=n.n(c);const l=require("@babel/runtime/helpers/createClass");var o=n.n(l);const u=require("@babel/runtime/helpers/inherits");var m=n.n(u);const d=require("@babel/runtime/helpers/possibleConstructorReturn");var p=n.n(d);const f=require("@babel/runtime/helpers/getPrototypeOf");var h=n.n(f);const v=require("@babel/runtime/helpers/assertThisInitialized");var y=n.n(v);const E=require("@babel/runtime/helpers/defineProperty");var b=n.n(E);const g=function(e){m()(c,e);var t,n,a=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var r=h()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function c(e){var t;return i()(this,c),t=a.call(this,e),b()(y()(t),"showMsg1",(function(){if(t.state.messages)return r().createElement("p",null,t.state.messages[0]);console.log(t.state.messages)})),b()(y()(t),"showMsg2",(function(){if(t.state.messages2)return r().createElement("p",null,t.state.messages2[0]);console.log(t.state.messages2)})),t.state={messages:void 0,messages2:void 0,cond:void 0,value:""},t.onChange=t.onChange.bind(y()(t)),t.add=t.add.bind(y()(t)),t}return o()(c,[{key:"add",value:function(){this.props.onButtonClick(this.state.value),this.setState({value:""})}},{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return r().createElement(r().Fragment,null,r().createElement("div",{className:"wrap_enter"},this.showMsg1(),this.showMsg2(),r().createElement("form",{action:"/signup/signin",method:"POST",className:"wrap_formEnter"},r().createElement("h2",{className:"form__title"},"Login to your account"),r().createElement("p",{className:"form__paragraph"},"Don't have an account?"," ",r().createElement(s.NavLink,{to:"/registration",className:"form__link"},"Register")),r().createElement("label",{for:"email",className:"form__label"},"Your email"),r().createElement("input",{type:"mail",name:"email",id:"email",placeholder:"email@site.com",className:"form__input"}),r().createElement("label",{for:"password",className:"form__label"},"Password"),r().createElement("input",{type:"password",name:"password",placeholder:"●●●●●●●●●●●●●●",className:"form__input",value:this.state.value,onChange:this.onChange}),r().createElement("div",{className:"form__container"},r().createElement("div",{class:"input-control-wrapper"},r().createElement("input",{type:"checkbox",name:"remember",id:"remember",className:"form__checkbox"}),r().createElement("label",{className:"form__label",for:"remember"},"Remember me")),r().createElement(s.NavLink,{to:"/registration",className:"form__password"},"Forgot password?")),r().createElement("button",{type:"submit",className:"form__button",disabled:!this.state.value,onClick:this.add},"Login now")),r().createElement("form",{action:"/signup/signin",method:"POST",className:"wrap_formEnter"},r().createElement("h2",{className:"form__title"},"Password recovery"),r().createElement("p",{className:"form__paragraph"},"Enter your email, we will send you a link to reset your password"),r().createElement("label",{for:"email",className:"form__label"},"Your email"),r().createElement("input",{type:"mail",name:"email",id:"email",placeholder:"email@site.com",className:"form__input"}),r().createElement("button",{type:"submit",className:"form__button",disabled:!this.state.value,onClick:this.add},"Send link")),r().createElement("form",{action:"/signup/signin",method:"POST",className:"wrap_formEnter"},r().createElement("h2",{className:"form__title"},"Registration"),r().createElement("p",{className:"form__paragraph"},"Already Registered?",r().createElement(s.NavLink,{to:"/",className:"form__link"},"Log in")),r().createElement("label",{for:"email",className:"form__label"},"Your email"),r().createElement("input",{type:"mail",name:"email",id:"email",placeholder:"email@site.com",className:"form__input"}),r().createElement("label",{for:"password",className:"form__label"},"Password"),r().createElement("input",{type:"password",name:"password",placeholder:"●●●●●●●●●●●●●●",className:"form__input",value:this.state.value,onChange:this.onChange}),r().createElement("div",{class:"input-control-wrapper"},r().createElement("input",{type:"checkbox",name:"remember",id:"remember",className:"form__checkbox"}),r().createElement("label",{className:"form__label",for:"remember"},"Remember me")),r().createElement("button",{type:"submit",className:"form__button",disabled:!this.state.value,onClick:this.add},"Register now"))))}}]),c}(r().Component);const N=function(e){m()(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var r=h()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function s(){var e;return i()(this,s),e=a.call(this),b()(y()(e),"showSuccess",(function(){if(e.state.msg)return r().createElement("p",{className:"wrap_msg"},e.state.msg.map((function(e){return r().createElement("p",{className:"txt_msg"},e)})))})),e.state={msg:void 0},e}return o()(s,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.state.msg&&"Регистрация завершена успешно, можете войти"==e.state.msg[0]?window.location.replace("/enter"):console.log(e.state.msg)}),1500)}},{key:"render",value:function(){return r().createElement("div",{className:"wrap_reg"},r().createElement("p",{className:"reg"},this.showSuccess(),r().createElement("form",{action:"/signup",method:"POST",className:"wrap_signup"},r().createElement("input",{type:"text",name:"email",placeholder:"mail",required:!0}),r().createElement("input",{type:"text",name:"password",placeholder:"пароль",required:!0}),r().createElement("button",{type:"submit",className:"buttonSignup"},"Создать учетную запись"))))}}]),s}(r().Component),w=require("@babel/runtime/helpers/toConsumableArray");var _=n.n(w);const x=require("@babel/runtime/helpers/asyncToGenerator");var T=n.n(x);const I=require("@babel/runtime/regenerator");var k=n.n(I);const C=require("axios");var O=n.n(C);function S(){return A.apply(this,arguments)}function A(){return(A=T()(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O().get("https://adminrosee.herokuapp.com/api/profile").then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}S().then((function(e){return e})).catch((function(e){return console.log(e)})),r().Component;const D=function(e){m()(c,e);var t,n,a=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var r=h()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function c(){var e;return i()(this,c),e=a.call(this),b()(y()(e),"handleClick",(function(t){var n=t.target.value;if(e.state.deleted.includes(n)){var a=e.state.deleted.indexOf(n);e.state.deleted.splice(a,1),console.log(e.state.deleted),e.detected.current.value,e.state.deleted}else e.setState({deleted:[].concat(_()(e.state.deleted),[n])}),setTimeout((function(){console.log(e.state.deleted),e.detected.current.value,e.state.deleted}),250)})),b()(y()(e),"userData",(function(){return e.state.info&&e.state.genry&&0==e.state.genry.length?r().createElement("div",{className:"wrap_userData"},r().createElement(s.Route,{exact:!0,path:"/profile"},e.state.info.map((function(e,t){return r().createElement("div",{className:"userInfo",style:{display:"yes"==e.cancel?"none":"grid"}},r().createElement("div",{className:"infoBlock1"},r().createElement("input",{type:"checkbox",name:"check",className:"eachCheck",value:e._id}),r().createElement("p",{className:"credentials userIndex"},t+1),r().createElement("p",{className:"credentials usName"},"no"==e.cancel?e.username:null),r().createElement("p",{className:"credentials usAdd"},"no"==e.cancel?e.useraddress:null),r().createElement("p",{className:"credentials usTime"},"no"==e.cancel?e.timestamp:null),r().createElement("p",{className:"credentials usPay"},"no"==e.cancel?e.typeOfPayment:null),r().createElement("p",{className:"credentials usPhone"},"no"==e.cancel?e.userphone:null),r().createElement("p",{className:"credentials usMail"},"no"==e.cancel?e.email:null)),r().createElement("div",{className:"infoBlock2"},r().createElement("form",{action:"/profile/"+e._id,method:"POST"},r().createElement("textarea",{className:"areas",name:"textData"},e.adminComment),r().createElement("button",{type:"submit",className:"buttonChange"},"Изменить"))))}))),r().createElement(s.Route,{exact:!0,path:"/profile/canceled"},e.state.info.map((function(t,n){return r().createElement("div",{className:"userInfo",style:{display:"no"==t.cancel?"none":"grid"}},r().createElement("div",{className:"infoBlock1"},r().createElement("input",{type:"checkbox",name:"check",className:"eachCheck",value:t._id,onChange:e.handleClick}),r().createElement("p",{className:"credentials userIndex"},n+1),r().createElement("p",{className:"credentials usName"},"yes"==t.cancel?t.username:null),r().createElement("p",{className:"credentials usAdd"},"yes"==t.cancel?t.useraddress:null),r().createElement("p",{className:"credentials usTime"},"yes"==t.cancel?t.timestamp:null),r().createElement("p",{className:"credentials usPay"},"yes"==t.cancel?t.typeOfPayment:null),r().createElement("p",{className:"credentials usPhone"},"yes"==t.cancel?t.userphone:null),r().createElement("p",{className:"credentials usMail"},"yes"==t.cancel?t.email:null)),r().createElement("div",{className:"infoBlock2"},r().createElement("form",{action:"/profile/"+t._id,method:"POST"},r().createElement("textarea",{className:"areas",name:"textData"},t.adminComment),r().createElement("button",{type:"submit",className:"buttonChange"},"Изменить"))))})))):r().createElement("div",{className:"wrap_userData"},r().createElement(s.Route,{exact:!0,path:"/profile"},e.state.genry.map((function(e,t){return r().createElement("div",{className:"userInfo",style:{display:"yes"==e.cancel?"none":"grid"}},r().createElement("div",{className:"infoBlock1"},r().createElement("input",{type:"checkbox",name:"check",className:"eachCheck"}),r().createElement("p",{className:"credentials userIndex"},t+1),r().createElement("p",{className:"credentials usName"},"no"==e.cancel?e.username:null),r().createElement("p",{className:"credentials usAdd"},"no"==e.cancel?e.useraddress:null),r().createElement("p",{className:"credentials usTime"},"no"==e.cancel?e.timestamp:null),r().createElement("p",{className:"credentials usPay"},"no"==e.cancel?e.typeOfPayment:null),r().createElement("p",{className:"credentials usPhone"},"no"==e.cancel?e.userphone:null),r().createElement("p",{className:"credentials usMail"},"no"==e.cancel?e.email:null)),r().createElement("div",{className:"infoBlock2"},r().createElement("form",{action:"/profile/"+e._id,method:"POST"},r().createElement("input",{className:"areasDouble",id:"ars",name:"textData",placeholder:e.adminComment}),r().createElement("button",{type:"submit",className:"buttonChange"},"Изменить"))))}))),r().createElement(s.Route,{exact:!0,path:"/profile/cancel"},e.state.genry.map((function(e,t){return r().createElement("div",{className:"userInfo",style:{display:"no"==e.cancel?"none":"grid"}},r().createElement("div",{className:"infoBlock1"},r().createElement("input",{type:"checkbox",name:"check",className:"eachCheck"}),r().createElement("p",{className:"credentials userIndex"},t+1),r().createElement("p",{className:"credentials usName"},"yes"==e.cancel?e.username:null),r().createElement("p",{className:"credentials usAdd"},"yes"==e.cancel?e.useraddress:null),r().createElement("p",{className:"credentials usTime"},"yes"==e.cancel?e.timestamp:null),r().createElement("p",{className:"credentials usPay"},"yes"==e.cancel?e.typeOfPayment:null),r().createElement("p",{className:"credentials usPhone"},"yes"==e.cancel?e.userphone:null),r().createElement("p",{className:"credentials usMail"},"yes"==e.cancel?e.email:null)),r().createElement("div",{className:"infoBlock2"},r().createElement("form",{action:"/profile/"+e._id,method:"POST"},r().createElement("input",{className:"areasDouble",id:"ars",name:"textData",placeholder:e.adminComment}),r().createElement("button",{type:"submit",className:"buttonChange"},"Изменить"))))}))))})),b()(y()(e),"indicate",(function(){var t=e.inp1.current.value.split("");if(e.state.info){e.setState({grey:[]});var n=e.state.info.filter((function(e){var n;for(n=0;n<3;n++)return e.username.split("")[n].toLowerCase()==t[n].toLowerCase()})),a=e.state.info.filter((function(e){var n;for(n=0;n<3;n++)return e.email.split("")[n]==t[n]})),r=e.state.info.filter((function(e){var n;for(n=0;n<3;n++)return e.typeOfPayment.split("")[n].toLowerCase()==t[n].toLowerCase()}));e.setState({genry:n.length>0?n:a.length>0?a:r.length>0?r:window.__INITIAL_DATA__}),setTimeout((function(){console.log(e.state.genry)}),100)}})),b()(y()(e),"subDelete",(function(){e.subscribes.current.classList.contains("subAdd")&&e.subscribes.current.classList.remove("subAdd")})),b()(y()(e),"subAdd",(function(){e.subscribes.current.classList.contains("subAdd")||e.subscribes.current.classList.add("subAdd")})),e.state={info:void 0,genry:[],deleted:[]},e.inp1=r().createRef(),e.inp=r().createRef(),e.subscribes=r().createRef(),e.unsubscribes=r().createRef(),e.detected=r().createRef(),e}return o()(c,[{key:"render",value:function(){return r().createElement("div",{className:"wrap_profile"},r().createElement("div",{className:"profile"},r().createElement("div",{className:"header"},r().createElement(s.NavLink,{to:"/profile",className:"subscribe",onClick:this.subDelete,ref:this.subscribes}," Подписки "),r().createElement(s.NavLink,{to:"/profile/canceled",className:"unsubscribe",activeClassName:"actSub",onClick:this.subAdd,ref:this.unsubscribes}," Отписались "),r().createElement("a",{href:"/profile/logout",id:"exit"},"Выйти"),r().createElement("input",{type:"text",name:"search",className:"searchForm",ref:this.inp1}),r().createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMi40OTk4IDIyLjg2ODRMMTYuODYzNCAxNy4yMzIxTTE2Ljg2MzQgMTcuMjMyMUMxOC40OTIyIDE1LjYwMzMgMTkuNDk5NiAxMy4zNTMyIDE5LjQ5OTYgMTAuODY3N0MxOS40OTk2IDUuODk2ODYgMTUuNDY5OSAxLjg2NzE5IDEwLjQ5OTEgMS44NjcxOUM1LjUyODIxIDEuODY3MTkgMS40OTg1NCA1Ljg5Njg2IDEuNDk4NTQgMTAuODY3N0MxLjQ5ODU0IDE1LjgzODYgNS41MjgyMSAxOS44NjgzIDEwLjQ5OTEgMTkuODY4M0MxMi45ODQ1IDE5Ljg2ODMgMTUuMjM0NiAxOC44NjA4IDE2Ljg2MzQgMTcuMjMyMVoiIHN0cm9rZT0iIzgwODA4MCIgc3Ryb2tlLXdpZHRoPSIyLjI1MDEzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K",id:"searchImg",onClick:this.indicate}),r().createElement(s.Route,{exact:!0,path:"/profile"},r().createElement("a",{href:"/postpone",id:"postpone"},"Отложить"),r().createElement("a",{href:"/unsubscribe",id:"unsubscribe2"},"Отписать")),r().createElement(s.Route,{exact:!0,path:"/profile/canceled"},r().createElement("form",{action:"/profile/delete",method:"POST"},r().createElement("input",{type:"hidden",name:"del",value:this.state.deleted,ref:this.detected}),r().createElement("button",{type:"submit",id:"postpone2"},"Удалить")),r().createElement("a",{href:"/unsubscribe",id:"unsubscribe3"},"Отправить ссылку на подписку")),r().createElement("a",{href:"/table",id:"table"},"Экспорт в xslx")),this.userData()))}}]),c}(r().Component),R=[{path:["/","/enter"],exact:!0,component:g},{path:["/registration","/signup"],exact:!0,component:N},{path:["/profile","/profile/canceled"],exact:!0,component:D,fetchInitialData:function(){return S()}}];const M=function(e){m()(c,e);var t,n,a=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var r=h()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function c(){return i()(this,c),a.apply(this,arguments)}return o()(c,[{key:"render",value:function(){return r().createElement("div",{className:"main_wrap"},r().createElement(s.Switch,null,R.map((function(e,t){return r().createElement(s.Route,{key:1,path:e.path,exact:e.exact,component:e.component})}))))}}]),c}(r().Component);var P=n(127),L=n.n(P);const j=require("react-dom/server"),q=require("cookie-parser");var B=n.n(q);const Y=require("body-parser");var z=n.n(Y);const U=require("serialize-javascript");var H=n.n(U);const Q=require("express-validator");var Z=n.n(Q),G=n(619),F=n.n(G);const W=require("express-session");var X=n.n(W);const J=require("passport");var K=n.n(J);const V=require("connect-flash");var $=n.n(V);const ee=require("cors");var te=n.n(ee),ne=n(127).Router();ne.get("/",(function(e,t,n){if(!e.isAuthenticated())return n();t.redirect("/profile")}),(function(e,t){var n=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(N,null)));t.send('<!DOCTYPE html>\n        <html>\n            <head>\n              <title>Проверка кода</title>\n                   <link rel="stylesheet" type="text/css" href="main.css">\n                     <meta name="viewport" content="width=device-width, initial-scale=1">\n                       <script src=\'bundle.js\' defer><\/script>\n                       </head>\n                     <body>\n                   <div id="app">\n                 '.concat(n,"\n              </div>\n            </body>\n        </html>"))}));const ae=ne;var re=n(936),se=n.n(re),ce=n(888).Strategy,ie=L().Router();n(201),K().serializeUser((function(e,t){t(null,e.id)})),K().deserializeUser((function(e,t){se().findById(e,(function(e,n){t(e,n)}))})),ie.get("/",(function(e,t,n){if(!e.isAuthenticated())return n();t.redirect("/profile")}),(function(e,t,n){var a=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(N,null)));t.send('<!DOCTYPE html>\n        <html>\n            <head>\n              <title>Вход</title>\n                <link rel="stylesheet" type="text/css" href="main.css">\n                  <meta name="viewport" content="width=device-width, initial-scale=1">\n                    <script src=\'bundle.js\' defer><\/script>\n                      </head>\n                    <body>\n                   <div id="app">\n                 '.concat(a,"\n              </div>\n            </body>\n        </html>"))})),ie.post("/",(function(e,t,n){var a=e.body,c=a.email,i=a.password;e.checkBody("email","Неправильный Email").isEmail(),e.checkBody("password","Минимально число символов - 5").isLength({min:5});var l=e.validationErrors();if(l){console.log(l);var o=l.map((function(e){return e.msg})),u=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(N,null)));return t.send('<!DOCTYPE html>\n        <html>\n            <head>\n              <title>Проверка кода</title>\n                   <link rel="stylesheet" type="text/css" href="main.css">\n                     <meta name="viewport" content="width=device-width, initial-scale=1">\n                       <script src=\'bundle.js\' defer><\/script>\n                       <script>window.__INITIAL_DATA__= '.concat(H()(o),'<\/script>\n                       </head>\n                     <body>\n                   <div id="app">\n                 ').concat(u,"\n              </div>\n            </body>\n        </html>"))}se().findOne({email:c},(function(a,l){if(a)return n(a);if(l){e.isAuthenticated();var o=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(N,null)));return t.send('<!DOCTYPE html>\n         <html>\n             <head>\n               <title>Проверка кода</title>\n                    <link rel="stylesheet" type="text/css" href="main.css">\n                      <meta name="viewport" content="width=device-width, initial-scale=1">\n                        <script src=\'bundle.js\' defer><\/script>\n                        <script>window.__INITIAL_DATA__= '.concat(H()(["Такой Email уже используется"]),'<\/script>\n                        </head>\n                      <body>\n                    <div id="app">\n                  ').concat(o,"\n               </div>\n             </body>\n         </html>")),n(null,!1)}var u=new(se())({email:c,password:i});se().createUser(u,(function(e,t){if(e)throw e;console.log(t)}));var m=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(N,null)));t.send('<!DOCTYPE html>\n      <html>\n          <head>\n            <title>Проверка кода</title>\n                 <link rel="stylesheet" type="text/css" href="main.css">\n                   <meta name="viewport" content="width=device-width, initial-scale=1">\n                     <script src=\'bundle.js\' defer><\/script>\n                     <script>window.__INITIAL_DATA__= '.concat(H()(["Регистрация завершена успешно, можете войти"]),'<\/script>\n                     </head>\n                   <body>\n                 <div id="app">\n               ').concat(m,"\n            </div>\n          </body>\n      </html>"))}))})),K().use("local.signin",new ce({usernameField:"email",passwordField:"password",passReqToCallback:!0},(function(e,t,n,a){se().findOne({email:t},(function(t,r){return t?(console.log(t),a(t)):r?void se().comparePassword(n,r.password,(function(t,n){if(t)throw t;return n?a(null,r):(e.flash("error","Неверный пароль"),a(null,!1))})):(e.flash("errors","Не найдено пользователей. Ошибка в почте"),a(null,!1))}))}))),ie.post("/signin",K().authenticate("local.signin",{successRedirect:"/profile",failureRedirect:"/enter",passReqToCallback:!0}));const le=ie;var oe=L().Router();n(201);var ue=F().createConnection(process.env.CUSTOMERS,{useNewUrlParser:!0,useUnifiedTopology:!0,useCreateIndex:!0},(function(){console.log("CUSTOMERS DB connected!")})).model("User",new(F().Schema)({username:{type:String,required:!0},userphone:{type:String,required:!0},email:{type:String,required:!0},timestamp:{type:String},adminComment:{type:String},password:{type:String,required:!0},useraddress:{type:String,required:!0},typeOfPayment:{type:String,required:!0},typeOfSkin:{type:String},comments:{type:String},letter:{type:String}}));function me(e,t,n){if(e.isAuthenticated())return n();t.redirect("/")}oe.get(["/","/canceled"],me,function(){var e=T()(k().mark((function e(t,n,a){var c,i,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.find();case 2:return c=e.sent,i=t.isAuthenticated(),l=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(D,null))),e.abrupt("return",n.send('<!DOCTYPE html>\n          <html>\n              <head>\n                <title>Проверка кода</title>\n                     <link rel="stylesheet" type="text/css" href="../main.css">\n                       <meta name="viewport" content="width=device-width, initial-scale=1">\n                         <script src=\'/bundle.js\' defer><\/script>\n                         <script>window.__INITIAL_DATA__ = '.concat(H()(c),"<\/script>\n                         <script>window.__INITIAL_STATE__ = ").concat(H()(i),'<\/script>\n                         </head>\n                       <body>\n                     <div id="app">\n                   ').concat(l,"\n                </div>\n              </body>\n          </html>")));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),oe.get("/logout",me,(function(e,t,n){e.logout(),t.redirect("/")})),oe.post("/delete",function(){var e=T()(k().mark((function e(t,n){var a,r,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.body.del,r=a.split(","),s=0;case 3:if(!(s<r.length)){e.next=11;break}return e.next=6,ue.findById(r[s]);case 6:e.sent.delete();case 8:s++,e.next=3;break;case 11:n.redirect("/profile/canceled");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),oe.post("/:id",function(){var e=T()(k().mark((function e(t,n){var a,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params.id,e.next=3,ue.findById(a);case 3:(r=e.sent).adminComment=t.body.textData,r.save(),console.log(r),n.redirect("/profile");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());const de=oe;var pe=L().Router();pe.get("/",(function(e,t,n){if(!e.isAuthenticated())return n();t.redirect("/profile")}),(function(e,t){var n=e.flash("error"),a=e.flash("errors"),c=e.isAuthenticated(),i=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(g,null)));t.send('<!DOCTYPE html>\n        <html>\n            <head>\n              <title>Проверка кода</title>\n                   <link rel="stylesheet" type="text/css" href="main.css">\n                     <meta name="viewport" content="width=device-width, initial-scale=1">\n                       <script src=\'bundle.js\' defer><\/script>\n                       <script>window.__INITIAL_DATA__ = '.concat(H()(n),"<\/script>\n                       <script>window.__INITIAL_INFO__ = ").concat(H()(a),"<\/script>\n                       <script>window.__INITIAL_STATE__ = ").concat(H()(c),'<\/script>\n                       </head>\n                     <body>\n                   <div id="app">\n                 ').concat(i,"\n              </div>\n            </body>\n        </html>"))}));const fe=pe;var he=L().Router();he.get("/profile",(function(e,t,n){if(e.isAuthenticated())return n();t.redirect("/")}),(function(e,t,n){t.send("hello")}));const ve=he;var ye=L()(),Ee=process.env.MONGODB_URI;process.env.PORT,n(201),F().connect(Ee||process.env.CONNECT,{useNewUrlParser:!0,useUnifiedTopology:!0,useCreateIndex:!0},(function(){console.log("Connection with database accountGW completed")})),ye.use((function(e,t,n){t.setHeader("Cache-Control","no-cache, no-store, must-revalidate"),t.setHeader("Pragma","no-cache"),t.setHeader("Expires","0"),t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept, Authorization"),n()})),ye.use(L().static("public")),ye.use(z().json()),ye.use(z().urlencoded({extended:!1})),ye.use(L().urlencoded({extended:!1})),ye.use(te()()),ye.use(Z()()),ye.use(B()()),ye.use(X()({secret:"mysecret",resave:!1,saveUnitialized:!1})),ye.use($()()),ye.use(K().initialize()),ye.use(K().session()),ye.use("/registration",ae),ye.use("/signup",le),ye.use("/profile",de),ye.use("/enter",fe),ye.use("/api",ve),ye.get("/",(function(e,t,n){if(!e.isAuthenticated())return n();t.redirect("/profile")}),(function(e,t,n){var a=e.isAuthenticated(),c=(0,j.renderToString)(r().createElement(s.StaticRouter,null,r().createElement(g,null)));t.send('<!DOCTYPE html>\n        <html>\n            <head>\n              <title>Проверка кода</title>\n                   <link rel="stylesheet" type="text/css" href="main.css">\n                     <meta name="viewport" content="width=device-width, initial-scale=1">\n                       <script src=\'bundle.js\' defer><\/script>\n                       <script>window.__INITIAL_STATE__ = '.concat(H()(a),'<\/script>\n                       </head>\n                     <body>\n                   <div id="app">\n                 ').concat(c,"\n              </div>\n            </body>\n        </html>"))})),ye.get("*",(function(e,t,n){var a=R.find((function(t){return(0,s.matchPath)(e.url,t)}))||{};(a.fetchInitialData?a.fetchInitialData(e.path):Promise.resolve()).then((function(n){var a={data:n},c=(0,j.renderToString)(r().createElement(s.StaticRouter,{location:e.url,context:a},r().createElement(M,{data:n}))),i='<!DOCTYPE html>\n            <html>\n                <head>\n                  <title>collab</title>\n                  <link rel="stylesheet" type="text/css" href="../main.css">\n                    <meta name="viewport" content="width=device-width, initial-scale=1">\n                      <script src=\'/bundle.js\' defer><\/script>\n                        <script>window.__INITIAL_DATA__= '.concat(H()(n),'<\/script>\n                            <title>COLLAB</title>\n                          </head>\n                        <body>\n                       <div id="app">\n                     ').concat(c,"\n                   </div>\n                </body>\n            </html>");return t.send(i)})).catch(n)})),ye.use((function(e,t,n){var a=new Error("Noooo");a.status=404,n(a)})),ye.listen(8080,(function(){console.log("connected!")}))},936:(e,t,n)=>{var a=n(619),r=a.Schema,s=n(773),c=new r({email:{type:String,required:!0},password:{type:String,required:!0}});e.exports=a.model("User",c),e.exports.createUser=function(e,t){var a=n(773);a.genSalt(10,(function(n,r){a.hash(e.password,r,(function(n,a){e.password=a,e.save(t)}))}))},e.exports.comparePassword=function(e,t,n){s.compare(e,t,(function(e,t){if(e)throw e;n(null,t)}))}},346:e=>{"use strict";e.exports=require("babel-regenerator-runtime")},773:e=>{"use strict";e.exports=require("bcryptjs")},201:e=>{"use strict";e.exports=require("dotenv/config")},127:e=>{"use strict";e.exports=require("express")},619:e=>{"use strict";e.exports=require("mongoose")},888:e=>{"use strict";e.exports=require("passport-local")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(346),n(2)})();